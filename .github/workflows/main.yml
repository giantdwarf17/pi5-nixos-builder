
name: Build

on:
  workflow_dispatch:

jobs:
  build:
    name: Build
    runs-on: ubuntu-24.04-arm
    steps:
      # Runs a single command using the runners shell
      - name: Install Nix
        run: sudo install -d -m755 -o $(id -u) -g $(id -g) /nix
      - name: Install Nix
        run: curl -L https://nixos.org/nix/install | sh
      - name: Source Nix
        run: source $HOME/.nix-profile/etc/profile.d/nix.sh
      - name: Build
        run: nix build github:nvmd/nixos-raspberrypi#installerImages.rpi5
      - name: Upload a Build Artifact
        uses: actions/upload-artifact@v4.6.2
        with:
          name: artifact
          # A file, directory or wildcard pattern that describes what to upload
          path: ./*
